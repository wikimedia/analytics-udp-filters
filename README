Wikimedia's generic UDP filtering system 0.1

Wikimedia Foundation (c) 2012 // Diederik van Liere

BACKGROUND
This new filter system replaces the old collection of filters written in C. 

The following is a list of valid command line parameters. 
	
Either -url or -project are mandatory (you can also use them both), the other 
command line parameters are optional:

-u or --url:          the string or multiple strings separated by a comma that 
indicate what you want to match.

-p or --project:      the part of the domain name that you want to match. 
For example, 'en.m.' would match all English mobile Wikimedia projects.
	
-g or --geocode:      flag to indicate geocode the log, by default turned off.

-a or --anonymize:    flag to indicate anonymize the log, by default turned off

-d or --database:     specify alternative path to MaxMind database. Please use
the Country database, the City database is not yet supported.

-c or --country_list: limit the log to particular countries, this should be a 
comma separated list of country codes. Valid country codes are the ISO 3166 
country codes (see http://www.maxmind.com/app/iso3166). 
	
-v or --verbose:      output detailed debug information, not recommended in 
production. Output is send to steer.

-h or --help:         show this menu with all command line options.

For options -u, -p and -c you can enter multiple values if you separate them by 
a comma. 

EXAMPLES


./udp_filter -p en.wikipedia            this will log all pageviews (depending 
on the sampling rate) if the domain contains en.wikipedia

./udp_filter -u SOPO                    this will log all pageviews (depending 
on the sampling rate) when the url (excluding the domain name) contains SOPA.
So this will collect SOPA *across* projects.

./udp_filter -p en.wikipedia -u SOPA	this will log all pageviews (depending 
on the sampling rate) where the domain contains en.wikipedia and the url 
contains SOPA.

./udp_filter -p en.wikipedia -u SOPA,PIPA   this will log all pageviews (
depending on the sampling rate) where the domain contains en.wikipedia and the 
url contains either SOPA or PIPA.

./udp_filter -p en.wikipedia -a	        this will log all pageviews (depending 
on the sampling rate) if the domain contains en.wikipedia and replace the 
ip address of the visitor with 0.0.0.0

./udp_filter -p en.wikipedia -g         this will log all pageviews (depending 
on the sampling rate) if the domain contains en.wikipedia and replace the 
ip address of the visitor with the country code. See for a list of all the 
valid country codes: http://www.maxmind.com/app/iso3166

./udp_filter -p en.wikipedia -g -c BA   this will log all pageviews (depending 
on the sampling rate) if the domain contains en.wikipedia and replace the ip 
address of the visitor with the country code. In addition, only hits from Brasil 
(BA) will be logged.

./udp_filter -p en.wikipedia -d GeoIP.dat   this specifies an alternative path 
for the MaxMind database and this  will log all pageviews (depending 
on the sampling rate) if the domain contains en.wikipedia.

./udp_filter -p en.wikipedia -u SOPA -c US  this will log all pageviews 
(depending on the sampling rate) where the domain contains en.wikipedia and 
the url contains SOPA and the visitor comes from the US. 

./udp_filter -p en.wikipedia -v         this turns on verbose logging and can 
help in debugging and verifying that the appropriate hits are being logged.
This setting is not recommended in production.
